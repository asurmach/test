<!DOCTYPE HTML>
<head>
   <meta charset="utf-8">
   <link rel="manifest" href="/test/manifest.json">
   <title>Крошечный документ HTML5</title>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>
   <p>Дадим встряску браузеру в стиле HTML5!</p>
   <div id="123" class="article__instagram">https://www.instagram.com/p/Bt4O0xLngph/</div>
   <script>
         var SCRIPT_ID = 'instagram-jsembeds';
        var containerId = '{{ rand }}';

        if (!$(SCRIPT_ID).length) {
            var js = document.createElement('script');
            js.async = true;
            js.id = SCRIPT_ID;
            js.src = "//platform.instagram.com/en_US/embeds.js";
            $('head').append(js);
        }
      
         var js = document.createElement('script');
            js.async = true;
            js.src = "//api.instagram.com/oembed/?url=https://www.instagram.com/p/Bt4O0xLngph/&omitscript=true&maxwidth=500&callback=callbackInstagramEmbeds";
            $('head').append(js);
      
      window['callbackInstagramEmbeds'] = function(data) {
           console.log(data);
        };

        $.ajax({
            url: '//api.instagram.com/oembed/?url=https://www.instagram.com/p/Bt4O0xLngph/&omitscript=true&maxwidth=500',
            dataType: 'json',
            xhrFields: {
                withCredentials: true
            }
        }).done(function(data) {
            $('#' + containerId).html(data.html);
            var renderEmbed = function() {
                if (window.instgrm && window.instgrm.Embeds) {
                    window.instgrm.Embeds.process();
                } else {
                    setTimeout(function() {
                        renderEmbed();
                    }, 500);
                }
            };
            renderEmbed();
        });
   </script>
</body>
